var theList,theExtraList,toggleWithKeyboard=false;
(function(b){setIpCacheLogList=function(){function k(d){d=parseInt(d.html().replace(/[^0-9]+/g,""),10);if(isNaN(d))return 0;return d}function h(d,a){var e="";if(!isNaN(a)){a=a<1?"0":a.toString();if(a.length>3){for(;a.length>3;){e=thousandsSeparator+a.substr(a.length-3)+e;a=a.substr(0,a.length-3)}a+=e}d.html(a)}}var i,l,m;i=b('input[name="_total"]',"#ipcachelist-form");l=b('input[name="_per_page"]',"#ipcachelist-form");m=b('input[name="_page"]',"#ipcachelist-form");var o=function(d){var a=b.query.get(),
e=b(".total-pages").text(),c=b("input[name=_per_page]","#comments-form").val();if(!a.paged)a.paged=1;if(!(a.paged>e)){if(d){theExtraList.empty();a.number=Math.min(8,c)}else{a.number=1;a.offset=Math.min(8,c)-1}a.no_placeholder=true;a.paged++;if(true===a.comment_type)a.comment_type="";a=b.extend(a,{action:"fetch-list",list_args:list_args,_ajax_fetch_list_nonce:b("#_ajax_fetch_list_nonce").val()});b.ajax({url:ajaxurl,global:false,dataType:"json",data:a,success:function(f){theExtraList.get(0).wpList.add(f.rows)}})}};
theExtraList=b("#the-extra-ipcache-list").wpList({alt:"",delColor:"none",addColor:"none"});theList=b("#the-ipcache-list").wpList({alt:"",delBefore:function(d){d.data._total=i.val()||0;d.data._per_page=l.val()||0;d.data._page=m.val()||0;d.data._url=document.location.href;d.data.ip_status=b("input[name=ip_status]","#ipcachelist-form").val();return d},dimAfter:function(d,a){d=b("#"+a.element);if(d.is(".spammed")){d.find("div.ip_status").html("1");d.find("td.spam").html("Spam")}else{d.find("div.ip_status").html("0");
d.find("td.spam").html("Ham")}b("span.ham-count").each(function(){var e=b(this),c,f;c=e.html().replace(/[^0-9]+/g,"");c=parseInt(c,10);if(!isNaN(c)){f=b("#"+a.element).is("."+a.dimClass)?-1:1;c+=f;if(c<0)c=0;h(e,c)}});b("span.spam-count").each(function(){var e=b(this),c,f;c=e.html().replace(/[^0-9]+/g,"");c=parseInt(c,10);if(!isNaN(c)){f=b("#"+a.element).is("."+a.dimClass)?1:-1;c+=f;if(c<0)c=0;h(e,c)}})},delAfter:function(d,a){var e,c,f,n,p=b(a.target).parent().is("span.set_ham"),q=b(a.target).parent().is("span.set_spam");
e=b(a.target).parent().is("span.set_blacklist");n=b(a.target).parent().is("span.set_delete");if(p){c=-1;f=1}if(q){f=-1;c=1}if(e||n)c=f=-1;b("span.spam-count").each(function(){var g=b(this),j=k(g)+c;h(g,j)});b("span.ham-count").each(function(){var g=b(this),j=k(g)+f;h(g,j)});e=i.val()?parseInt(i.val(),10):0;e=e-c-f;if(e<0)e=0;if("object"==typeof d&&0<a.parsed.responses[0].supplemental.time)if(total_items_i18n=a.parsed.responses[0].supplemental.total_items_i18n||""){b(".displaying-num").text(total_items_i18n);
b(".total-pages").text(a.parsed.responses[0].supplemental.total_pages_i18n);b(".tablenav-pages").find(".next-page, .last-page").toggleClass("disabled",a.parsed.responses[0].supplemental.total_pages==b(".current-page").val())}if(!(!theExtraList||theExtraList.size()==0||theExtraList.children().size()==0||1)){theList.get(0).wpList.add(theExtraList.children(":eq(0)").remove().clone());o()}},addColor:"none"})};b(document).ready(function(){setIpCacheLogList();b(document).delegate("span.avhfdas_is_delete a.avhfdas_is_delete",
"click",function(){return false})})})(jQuery);